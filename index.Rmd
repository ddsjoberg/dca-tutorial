---
title: "DCA Example"
output: 
  html_document:
    includes: 
      in_header: "highlight/header.html"
    css: "highlight/styles/agate.min.css"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(knitr.duplicate.label = "allow")

add_tabset_codes <- function(chunk_label) {
  res <-
    knitr::knit_child(
      text = unlist(knitr::knit_expand('templates/tabset-template.Rmd')),
      quiet = TRUE,
      envir = rlang::caller_env()
    )
  cat(res, sep = '\n')
}
```

```{r, read_chunk, include=FALSE}
knitr::read_chunk("rmd_chunks/r-chunks.R")
knitr::read_chunk("rmd_chunks/stata-chunks.do")
```

Diagnostic and prognostic models are typically evaluated with measures of accuracy that do not address clinical consequences.
Decision-analytic techniques allow assessment of clinical outcomes but often require collection of additional information and may be cumbersome to apply to models that yield a continuous result.
Decision curve analysis is a method for evaluating and comparing prediction models that incorporates clinical consequences, requires only the data set on which the models are tested, and can be applied to models that have either continuous or dichotomous results.
This document will walk you through how to perform a decision curve analysis (DCA) in many settings, and how to interpret the resulting curves. 
In DCA prediction models are compared to two default strategies: 1) assume that all patients are test positive and therefore treat everyone, or 2) assume that all patients are test negative and offer treatment to no one. 
"Treatmentâ€ is considered in the widest possible sense, not only drugs, radiotherapy or surgery, but advice, further diagnostic procedures or more intensive monitoring.
For more details on DCA, visit [www.decisioncurveanalysis.org](https://www.mskcc.org/departments/epidemiology-biostatistics/biostatistics/decision-curve-analysis).
You'll find the original articles explaining the details of the DCA derivation along with other papers providing more details. 
Below we'll walk you through how to perform DCA for binary and time-to-event outcomes

Build a logistic regression model

```{r, echo=FALSE, results='asis'}
add_tabset_codes("model")
```

```{r, echo=FALSE, results='asis'}
add_tabset_codes("model2")
```
